syntax = "proto3";

package provider.v1;

import "common/v1/types.proto";
import "google/protobuf/field_mask.proto";

option go_package = "github.com/JrMarcco/kuryr-api/api/provider/v1";

message Provider {
  uint64 id = 1;
  string provider_name = 2;
  common.v1.Channel channel = 3;

  string endpoint = 4;
  string region_id = 5;

  string app_id = 6;
  string api_key = 7;
  string api_secret = 8;

  int32 weight = 9;
  int32 qps_limit = 10;
  int32 daily_limit = 11;

  string audit_callback_url = 12;

  string active_status = 13;
}

service ProviderService {
  rpc Save(SaveRequest) returns (SaveResponse);
  rpc Delete(DeleteRequest) returns (DeleteResponse);
  rpc Update(UpdateRequest) returns (UpdateResponse);

  rpc List(ListRequest) returns (ListResponse);
  rpc FindById(FindByIdRequest) returns (FindByIdResponse);
  rpc FindByChannel(FindByChannelRequest) returns (FindByChannelResponse);
}

message SaveRequest {
  Provider provider = 1;
}

message SaveResponse {
  Provider provider = 1;
}

message DeleteRequest {
  uint64 id = 1;
}

message DeleteResponse {}

message UpdateRequest {
  google.protobuf.FieldMask field_mask = 1;

  Provider provider = 2;
}

message UpdateResponse {
  Provider provider = 1;
}

message ListRequest {
  google.protobuf.FieldMask field_mask = 1;
}

message ListResponse {
  repeated Provider providers = 1;
}

message FindByIdRequest {
  google.protobuf.FieldMask field_mask = 1;

  uint64 id = 2;
}

message FindByIdResponse {
  Provider provider = 1;
}

message FindByChannelRequest {
  google.protobuf.FieldMask field_mask = 1;

  common.v1.Channel channel = 2;
}

message FindByChannelResponse {
  repeated Provider providers = 1;
}
